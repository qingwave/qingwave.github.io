<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title class="pjax-title">
        k8s如何优雅升级应用
        
    </title><meta name="Description" content="Coding, Reading and Daydreaming"><meta property="og:title" content="k8s如何优雅升级应用" />
<meta property="og:description" content="在k8s中通常用户通过ingress接入流量，转发到后端实例(ingress → pod)，在后端应用更新过程中，ingress是否能做到优雅升级，本文将通过分析升级流程与实验验证，说明在k8s中如何实现优化升级。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://qingwave.github.io/k8s-graceful-update-app/" /><meta property="og:image" content="https://qingwave.github.io/img/favicon.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-19T18:28:50+00:00" />
<meta property="article:modified_time" content="2021-11-20T10:59:07+00:00" /><meta property="og:site_name" content="Qingwave" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://qingwave.github.io/img/favicon.png"/>

<meta name="twitter:title" content="k8s如何优雅升级应用"/>
<meta name="twitter:description" content="在k8s中通常用户通过ingress接入流量，转发到后端实例(ingress → pod)，在后端应用更新过程中，ingress是否能做到优雅升级，本文将通过分析升级流程与实验验证，说明在k8s中如何实现优化升级。"/>
<meta name="application-name" content="Qingwave">
<meta name="apple-mobile-web-app-title" content="Qingwave">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="https://qingwave.github.io/k8s-graceful-update-app/" /><link rel="prev" href="https://qingwave.github.io/ingress-real-ip/" /><link rel="next" href="https://qingwave.github.io/prometheus-best-practice-operation/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><meta name="google-site-verification" content="-8bOgP-V4XsxXZtXVx9DIXkdIuruvAYiY37vBg26acI" /><meta name="baidu-site-verification" content="muFp3xopwC" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "k8s如何优雅升级应用",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/qingwave.github.io\/k8s-graceful-update-app\/"
        },"genre": "posts","keywords": "k8s, ingress, nginx","wordcount":  2135 ,
        "url": "https:\/\/qingwave.github.io\/k8s-graceful-update-app\/","datePublished": "2020-06-19T18:28:50+00:00","dateModified": "2021-11-20T10:59:07+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "qinng"
            },"description": ""
    }
    </script></head>

<body header-desktop="normal" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark');}
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('light' === 'light' || 'light' === 'dark') setTheme('light'), saveTheme('light'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Qingwave">Qingwave<span class="header-title-inner">'</span><span class="header-title-post"> Time</span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/about/" title="About">About</a><a class="menu-item" href="/tags/" title="Tags">Tags</a><a class="menu-item" href="/categories/" title="Categories">Categories</a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Qingwave">Qingwave<span class="header-title-inner">'</span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/about/" title="About">About</a><a class="menu-item" href="/tags/" title="Tags">Tags</a><a class="menu-item" href="/categories/" title="Categories">Categories</a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">目录</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ul>
    <li><a href="#ingress原理">Ingress原理</a></li>
    <li><a href="#ingress-nginx-重试机制">ingress-nginx 重试机制</a></li>
    <li><a href="#升级策略">升级策略</a></li>
    <li><a href="#实验验证">实验验证</a>
      <ul>
        <li><a href="#实验环境">实验环境</a></li>
        <li><a href="#扩容">扩容</a></li>
        <li><a href="#缩容">缩容</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle", "normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title">k8s如何优雅升级应用</h1><div class="post-meta">
            <div class="post-meta-line"><time datetime="Jun 19, 2020">Jun 19, 2020</time>
            </div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#ingress原理">Ingress原理</a></li>
    <li><a href="#ingress-nginx-重试机制">ingress-nginx 重试机制</a></li>
    <li><a href="#升级策略">升级策略</a></li>
    <li><a href="#实验验证">实验验证</a>
      <ul>
        <li><a href="#实验环境">实验环境</a></li>
        <li><a href="#扩容">扩容</a></li>
        <li><a href="#缩容">缩容</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>在k8s中通常用户通过<code>ingress</code>接入流量，转发到后端实例(<code>ingress → pod</code>)，在后端应用更新过程中，<code>ingress</code>是否能做到优雅升级，本文将通过分析升级流程与实验验证，说明在k8s中如何实现优化升级。</p>
<h2 id="ingress原理" class="headerLink">
    <a href="#ingress%e5%8e%9f%e7%90%86" class="header-mark"></a>Ingress原理</h2><p>用户创建ingress资源后，<code>ingress-nginx</code>通过<code>service</code>获取到对应的<code>endpoint</code>，监听到<code>endpoint</code>变化后将动态更新<code>upstream</code>。</p>
<p><code>endpoint</code>每次变化后会通过<code>selector</code>匹配的<code>pod</code>列表中<code>ready pod</code>（不包括待删除的<code>pod</code>, 及<code>DeletionTimestamp</code>不为空）</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pod <span class="nv">ready</span> <span class="o">=</span> 所有container ready<span class="o">(</span>启动成功, 健康检查通过<span class="o">)</span> + 所有rediness gateway执行成功
</span></span></code></pre></div><p>那么<code>endpoint</code>在什么状况下会发生变化：</p>
<ul>
<li>service变化（一般不会）</li>
<li>扩缩容</li>
<li>升级</li>
<li>删除pod</li>
</ul>
<p>不管是什么操作，可归结于启动、删除、退出</p>
<ul>
<li><strong>启动</strong>，只要确保<code>pod ready</code>时能服务能正常接受流量，不会影响影响服务</li>
<li><strong>退出</strong>, 如果是应用异常退出，不能处理已接受的流量，此种状况是应用本身行为，不在讨论范围</li>
<li><strong>删除</strong>, 由于k8s所有组件都采用监听机制，无法保证<code>pod</code>删除时<code>ingress-nginx</code>的后端已经更新</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 大约在2s内</span>
</span></span><span class="line"><span class="cl">ingress-nginx 生效时间 <span class="o">=</span> endpoint 生效时间 + upstream更新时间
</span></span></code></pre></div><p>如果要保证pod删除时不丢流量，需要做到</p>
<ul>
<li>已接受的请求需要处理完，可监听TERM信号，处理完再退出， 可参考https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods</li>
<li>删除时不接受新的请求，这部分无法保证，只能保证#1</li>
</ul>
<h2 id="ingress-nginx-重试机制" class="headerLink">
    <a href="#ingress-nginx-%e9%87%8d%e8%af%95%e6%9c%ba%e5%88%b6" class="header-mark"></a>ingress-nginx 重试机制</h2><p>ingress-nginx默认开启了proxy_next_upstream，配置如下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In case of errors try the next upstream server before returning an error</span>
</span></span><span class="line"><span class="cl">proxy_next_upstream error timeout<span class="p">;</span>
</span></span><span class="line"><span class="cl">proxy_next_upstream_timeout 0<span class="p">;</span>
</span></span><span class="line"><span class="cl">proxy_next_upstream_tries 3<span class="p">;</span>
</span></span></code></pre></div><p>如果一次请求中，<code>upstream server</code> 出错或超时将通过rr算法重试下一个server，最多尝试三次。如果后端大于三个实例，一个实例异常不会影响服务。</p>
<h2 id="升级策略" class="headerLink">
    <a href="#%e5%8d%87%e7%ba%a7%e7%ad%96%e7%95%a5" class="header-mark"></a>升级策略</h2><p>对于<code>Deployment</code>有两种升级策略， <code>Recreate</code>与<code>RollingUpdate</code></p>
<ul>
<li><strong>Recreate</strong>, 先将旧版缩到0再将新版扩到期望值，不建议使用</li>
<li><strong>RollingUpdate</strong>，默认策略，滚动更新</li>
</ul>
<p>在滚动升级时主要依据<code>maxSurge</code>与<code>maxUnavailable</code>对新旧版本进行扩缩</p>
<ul>
<li><strong>maxSurge</strong>， 升级中最多有多少pod超过期望值</li>
<li><strong>maxUnavailable</strong>， 此值用来计算升级中最小可用的实例数，最大不可用的实例数表示不准确</li>
</ul>
<p>举个例子，比如10个副本的Deployment， 采用默认值<code>maxSurge</code>与<code>maxUnavaiable</code>都为25%</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">// 向上取整为 <span class="m">3</span> 
</span></span><span class="line"><span class="cl"><span class="nv">maxSurge</span> <span class="o">=</span> replicas * deployment.spec.strategy.rollingUpdate.maxSurge<span class="o">(</span>25%<span class="o">)=</span> 2.5
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">// 向下取整为 <span class="m">2</span> 
</span></span><span class="line"><span class="cl"><span class="nv">maxUnavailable</span> <span class="o">=</span> replicas * deployment.spec.strategy.rollingUpdate.maxUnavailable<span class="o">(</span>25%<span class="o">)=</span> 2.5
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nv">maxAvailable</span> <span class="o">=</span> replicas<span class="o">(</span>10<span class="o">)</span> + MaxSurge（3） <span class="o">=</span> <span class="m">13</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">minAvailable :<span class="o">=</span> *<span class="o">(</span>deployment.Spec.Replicas<span class="o">)</span>（10） - maxUnavailable（2）<span class="o">=</span> <span class="m">8</span>
</span></span></code></pre></div><p>在升级过程中，首先创建 newRS，然后为其设定 replicas，此时计算出 replicas 结果为 3。等到下一个 syncLoop 时，所有 rs 的 replicas 已经达到最大值 10 + 3 = 13，此时需要 scale down oldRSs 了，scale down 的数量是通过以下公式得到的：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">// <span class="nv">13</span> <span class="o">=</span> <span class="m">10</span> + <span class="m">3</span> 
</span></span><span class="line"><span class="cl">allPodsCount :<span class="o">=</span> newRS<span class="o">(</span>10<span class="o">)</span> + oldRS<span class="o">(</span>3<span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">// ??? 
</span></span><span class="line"><span class="cl">newRSUnavailablePodCount :<span class="o">=</span> *<span class="o">(</span>newRS.Spec.Replicas<span class="o">)</span> - newRS.Status.AvailableReplicas
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">// <span class="m">13</span> - <span class="m">8</span> - ??? 
</span></span><span class="line"><span class="cl">maxScaledDown :<span class="o">=</span> allPodsCount - minAvailable - newRSUnavailablePodCount
</span></span><span class="line"><span class="cl">newRSUnavailablePodCount 此时不确定，但是值在 <span class="o">[</span>0,3<span class="o">]</span> 中，此时假设 newRS 的三个 pod 还处于 containerCreating 状态，则newRSUnavailablePodCount 为 3，根据以上公式计算所知 maxScaledDown 为 2。如果有个新版本pod已经ready，则maxScaledDown 为 4。
</span></span></code></pre></div><p> 
特殊情况，当只有一个副本，<code>maxSurge</code>与<code>maxUnavaiable</code>都为1时，按照以上公式，先扩容1个新版pod，再缩一个旧版的，如果旧版已经删除了而新版还没有起来可能会丟流量，可以将<code>maxUnavaiable</code>设置为0可避免以上情况。</p>
<h2 id="实验验证" class="headerLink">
    <a href="#%e5%ae%9e%e9%aa%8c%e9%aa%8c%e8%af%81" class="header-mark"></a>实验验证</h2><p>滚动升级终于也是通过扩缩新旧版本来实现的，我们只需要分析扩缩容过程中会不会丢流量即可。</p>
<h3 id="实验环境" class="headerLink">
    <a href="#%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83" class="header-mark"></a>实验环境</h3><p>image: nginx
tool:  <code>wrk -c 2 -d 120 -H &quot;Connection:Close&quot; http://my.nginx.svc</code></p>
<h3 id="扩容" class="headerLink">
    <a href="#%e6%89%a9%e5%ae%b9" class="header-mark"></a>扩容</h3><ol>
<li>从1扩到10个</li>
</ol>
<p>不丢流量，nginx启动很快不需要额外的初始化工作，正常情况需要配置健康检查</p>
<h3 id="缩容" class="headerLink">
    <a href="#%e7%bc%a9%e5%ae%b9" class="header-mark"></a>缩容</h3><p><strong>1) 10 → 1</strong></p>
<p>缩容时会有502错误</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Running 2m <span class="nb">test</span> @ http://my.nginx.svc
</span></span><span class="line"><span class="cl">  <span class="m">2</span> threads and <span class="m">2</span> connections
</span></span><span class="line"><span class="cl">  Thread Stats   Avg      Stdev     Max   +/- Stdev
</span></span><span class="line"><span class="cl">    Latency    11.73ms   27.02ms 229.17ms   95.14%
</span></span><span class="line"><span class="cl">    Req/Sec   162.91     45.77   232.00     74.13%
</span></span><span class="line"><span class="cl">  <span class="m">8969</span> requests in 28.24s, 2.40MB <span class="nb">read</span>
</span></span><span class="line"><span class="cl">  Non-2xx or 3xx responses: <span class="m">366</span>
</span></span><span class="line"><span class="cl">Requests/sec:    317.62
</span></span><span class="line"><span class="cl">Transfer/sec:     86.93KB
</span></span></code></pre></div><p>查看ingress日志</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">2020/06/19 08:12:28 <span class="o">[</span>error<span class="o">]</span> 9533#9533: *197916788 connect<span class="o">()</span> failed <span class="o">(</span>111: Connection refused<span class="o">)</span> <span class="k">while</span> connecting to upstream, client: 10.232.41.102, server: my.nginx.svc, request: <span class="s2">&#34;GET / HTTP/1.1&#34;</span>, upstream: <span class="s2">&#34;http://10.126.110.3:80/&#34;</span>, host: <span class="s2">&#34;my.nginx.svc&#34;</span>
</span></span><span class="line"><span class="cl">2020/06/19 08:12:33 <span class="o">[</span>error<span class="o">]</span> 8935#8935: *197916707 upstream timed out <span class="o">(</span>110: Operation timed out<span class="o">)</span> <span class="k">while</span> connecting to upstream, client: 10.232.41.102, server: my.nginx.svc, request: <span class="s2">&#34;GET / HTTP/1.1&#34;</span>, upstream: <span class="s2">&#34;http://10.126.69.136:80/&#34;</span>, host: <span class="s2">&#34;my.nginx.svc&#34;</span>
</span></span><span class="line"><span class="cl">2020/06/19 08:12:33 <span class="o">[</span>error<span class="o">]</span> 9533#9533: *197916788 upstream timed out <span class="o">(</span>110: Operation timed out<span class="o">)</span> <span class="k">while</span> connecting to upstream, client: 10.232.41.102, server: my.nginx.svc, request: <span class="s2">&#34;GET / HTTP/1.1&#34;</span>, upstream: <span class="s2">&#34;http://10.126.69.136:80/&#34;</span>, host: <span class="s2">&#34;my.nginx.svc
</span></span></span><span class="line"><span class="cl"><span class="s2">10.232.41.102 - - [18/Jun/2020:09:14:35 +0000] &#34;</span>GET / HTTP/1.1<span class="s2">&#34; 502 157 &#34;</span>-<span class="s2">&#34; &#34;</span>-<span class="s2">&#34; 38 0.001 [default-my-nginx-80] [] 10.46.12.80:80, 10.46.12.79:80, 10.46.12.80:80 0, 0, 0 0.000, 0.000, 0.000 502, 502, 502 5cfc063dbe7daf1db953a0e16891f100
</span></span></span></code></pre></div><p><strong>2) 4→1</strong></p>
<p>会丟流量</p>
<p><strong>3）3→1</strong></p>
<p>测试多次，偶现过丢流量的情况，这与ingress重试算法有关系</p>
<p><strong>4） 10→1</strong>, 忽略term信号, 不丢流量</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Running 2m <span class="nb">test</span> @ http://my.nginx.svc
</span></span><span class="line"><span class="cl">  <span class="m">2</span> threads and <span class="m">2</span> connections
</span></span><span class="line"><span class="cl">Thread Stats   Avg      Stdev     Max   +/- Stdev
</span></span><span class="line"><span class="cl">    Latency    12.12ms   16.66ms 214.89ms   88.39%
</span></span><span class="line"><span class="cl">    Req/Sec   129.75     74.05   250.00     62.35%
</span></span><span class="line"><span class="cl">  <span class="m">8811</span> requests in 34.24s, 2.35MB <span class="nb">read</span>
</span></span><span class="line"><span class="cl">Requests/sec:    257.35
</span></span><span class="line"><span class="cl">Transfer/sec:     70.41KB
</span></span></code></pre></div><h2 id="总结" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>总结</h2><p>通过分析及实验，在pod启动时可配置健康检查避免请求异常；同一时刻大于2个pod终止可能会丢失流量，通过监听退出信号可避免此种情况。综上，应用的优化升级需要做到以下几点：</p>
<ul>
<li>健康检测，<code>pod ready</code>时能够正常接受流量</li>
<li>优雅停止，保证处理完请求再退出，在这段时间内实例ip可从ingress后端摘除</li>
<li>滚动升级配置，若只有1个实例需设置maxsurge=0，更建议副本数设置多个</li>
</ul></div>

        
        <div class="post-footer" id="post-footer">
    <div class="post-meta-line"><span class="single-tag">
                <a href='/tags/k8s/'>#k8s</a>
                    <span class="separator"> </span>
                <a href='/tags/ingress/'>#ingress</a>
                    <span class="separator"> </span>
                <a href='/tags/nginx/'>#nginx</a></span></div>

    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-link">
                <a href='/about'>About Me</a>
            </div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
        </div>
    </div><div class="post-nav"><a href="/ingress-real-ip/" class="prev" rel="prev" title="Ingress获取真实IP"><i class="fas fa-angle-left fa-fw"></i>Ingress获取真实IP</a>
            <a href="/prometheus-best-practice-operation/" class="next" rel="next" title="Prometheus最佳实践-聚合函数">Prometheus最佳实践-聚合函数<i class="fas fa-angle-right fa-fw"></i></a></div></div>
<div id="comments"><div id="giscus"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app/">giscus</a>.
            </noscript></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://qingwave.github.io" target="_blank" rel="noopener noreferrer">Qingwave</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="回到顶部">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a>
    </div><div class="assets"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@sliphua/pjax@2.4.0/dist/pjax.min.js"></script><script type="text/javascript" src="/js/theme.min.js" defer></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-134548083-1', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-134548083-1" async></script></div>

<div class="pjax-assets"><script type="text/javascript">window.config={"code":{"maxShownLines":-1},"comment":{"giscus":{"customTheme":"light","darkTheme":"dark","dataCategory":"Announcements","dataCategoryId":"DIC_kwDOCg97r84CBQfL","dataEmitMetadata":"0","dataInputPosition":"top","dataLang":"en","dataMapping":"title","dataReactionsEnabled":"1","dataRepo":"qingwave/qingwave.github.io","dataRepoId":"MDEwOlJlcG9zaXRvcnkxNjg3ODY4NjM=","lightTheme":"light"}}};</script><script type="text/javascript" src="/js/giscus.min.js" defer></script></div>
</body>

</html>